title: Home
path: home
icon: mdi:home-outline
visible:
  - user: 351294738e7e4b52aa10c8db1eddee91 # Bildschirm
  - user: f2058f3d61c94ec6b017839ee1cb4aa9 # Laptop-Admin
type: custom:grid-layout
layout:
  grid-template-columns: 25% 25% 25% 25%
  grid-template-rows: auto
  grid-template-areas: |
    "temp_time meteogram meteogram meteogram"
    "main_left_left main_mid_left main_right main_right"
  mediaquery:
    "(max-width: 600px)":
      grid-template-columns: 100%
      grid-template-areas: |
        "temp_time"
        "meteogram"
        "main_left_left"
        "main_mid_left"
        "main_right"
cards:
  - type: horizontal-stack
    view_layout:
      grid-area: temp_time
    cards:
      - type: markdown
        style: |
          h1 {
            font-weight: 300;
            font-size: 2.4em;
          }  
        content: >
          # {{ '%.1f'%(states('sensor.temp_esszimmer_pm') | float) | float }}°C
          
          Luftfeuchtigkeit: {{ states('sensor.luftfeuchtigkeit_kuche_aqara') }}%
      - type: markdown
        style: |
          h1 {
            font-weight: 300;
            font-size: 2.4em;
          }
        content: >
          # {{ states('sensor.time') }}
          
          {{ states('sensor.date_template') }}
  - type: custom:mini-graph-card
    view_layout:
      grid-area: temp_time
    style: |
      state__value {
        font-size: 2em;
      }
    entities: 
      - sensor.temp_wetterstation
    name: Außentemperatur
    hour24: true
    decimals: 1
    show:
      labels: true
  - type: custom:hui-element
    view_layout:
      grid-area: meteogram
    card_type: picture-elements
    image: /local/meteograms/meteogram.png
    elements:
      - type: image
        entity: camera.meteogram
        camera_image: camera.meteogram
        style:
          left: 50%
          top: 50%
          width: 100%
          height: 100%
  - type: entities
    view_layout:
      grid-area: main_left_left
    title: "Wer ist wo..."
    show_header_toggle: false
    entities:
      - entity: sensor.location_jo
  - type: entities
    view_layout:
      grid-area: main_left_left
    title: Pizza Timer
    show_header_toggle: false
    entities:
      - type: custom:slider-entity-row
        entity: input_number.pizza_timer_2
        full_row: true
  - type: horizontal-stack
    view_layout:
      grid-area: main_left_left
    cards:
      - type: entity-button
        name: Pizza
        icon: mdi:pizza
        tap_action:
          action: call-service
          service: input_number.set_value
          service_data:
            entity_id: input_number.pizza_timer_2
            value: 11
        entity: input_number.pizza_timer_2
      - type: entity-button
        name: runter
        icon: mdi:arrow-down-bold-box-outline
        tap_action:
          action: call-service
          service: scene.turn_on
          service_data:
            entity_id: scene.jal_wohnbereich_runter
        entity: scene.jal_wohnbereich_runter
      - type: entity-button
        name: hoch
        icon: mdi:arrow-up-bold-box-outline
        tap_action:
          action: call-service
          service: scene.turn_on
          service_data:
            entity_id: scene.jal_wohnbereich_hoch
        entity: scene.jal_wohnbereich_hoch
  - type: custom:auto-entities
    view_layout:
      grid-area: main_mid_left
    show_empty: false
    card:
      type: entities
      title: "zu erledigen"
      show_header_toggle: false
    filter:
      include:
        - entity_id: "switch.reminder*"
          state: "on"
  - type: custom:auto-entities
    view_layout:
      grid-area: main_mid_left
    show_empty: false
    card:
      type: glance
      title: Batterie wechseln
    filter:
      include:
        - entity_id: "*battery"
          state: '< 15'
#          - type: picture-elements
#            image: /local/camera_abstellraum/last_motion.jpg
#            elements:
#              - type: image
#                entity: camera.abstellraum_letze_bewegung
#                camera_image: camera.abstellraum_letze_bewegung
#                style:
#                  left: 50%
#                  top: 50%
#                  width: 100%
#                  height: 100%
  - type: entities
    view_layout:
      grid-area: main_mid_left
    show_header_toggle: false
    entities:
#            - type: custom:template-entity-row
#              name: Neuinfektionen Deutschland
#              icon: mdi:medical-bag
#              entity: sensor.deutschland_newcases
#              state: "{{ '%.0f'%(states('sensor.deutschland_newcases')) | float }}"
#            - type: custom:template-entity-row
#              name: 7-Tage Inzidenz Deutschland
#              icon: mdi:medical-bag
#              entity: sensor.deutschland_weekincidence
#              state: "{{ '%.0f'%(states('sensor.deutschland_weekincidence')) | float | round(0) }}"
#            - type: custom:template-entity-row
#              name: 7-Tage Inzidenz BaWü
#              icon: mdi:medical-bag
#              entity: sensor.bl_baden_wurttemberg_weekincidence
#              state: "{{ '%.0f'%(states('sensor.bl_baden_wurttemberg_weekincidence')) | float | round(0) }}"
    - type: custom:template-entity-row
      name: 7-Tage Inzidenz RV
      icon: mdi:medical-bag
      entity: sensor.lk_ravensburg_weekincidence
      state: "{{ '%.0f'%(states('sensor.lk_ravensburg_weekincidence')) | float | round(0) }}"
    - type: custom:template-entity-row
      name: 7-Tage Inzidenz Wittenberg
      icon: mdi:medical-bag
      entity: sensor.lk_wittenberg_weekincidence
      state: "{{ '%.0f'%(states('sensor.lk_wittenberg_weekincidence')) | float | round(0) }}"
    - type: divider
      style: 
        height: 1px
        background-color: "#ff9c27"
        opacity: 0.25
    - type: custom:template-entity-row
      name: Strompreis aktuell
      entity: sensor.strompreis_effektiv_letzte_3_minuten
      state: "{{ '%.0f'%(100*(states('sensor.strompreis_effektiv_letzte_3_minuten') | float)) }} ct"
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 50% 50%
      grid-template-rows: auto
      grid-template-areas: |
        "warn warn"
        "garbage birthdays"
        "mid_right right_right"
      mediaquery:
        "(max-width: 600px)":
          grid-template-columns: 100%
          grid-template-areas: |
            "warn"
            "garbage"
            "birthdays"
            "mid_right"
            "right_right"
    cards:
      - type: custom:auto-entities
        view_layout:
          grid-area: warn
        show_empty: false
        card:
          type: entities
          style: |
            ha-card {
              border-style: solid;
              border-color: var(--primary-color);
            }    
          show_header_toggle: false
        filter:
          include:
            - entity_id: "sensor.dwd_warn*"
          exclude:
            - state: "off"
      - type: custom:auto-entities
        view_layout:
          grid-area: garbage
        show_empty: false
        card:
          type: entities
          title: "Abfall"
          show_header_toggle: false
        filter:
          include:
            - entity_id: "sensor.abfall_anzeige*"
      - type: custom:auto-entities
        view_layout:
          grid-area: birthdays
        show_empty: false
        card:
          type: entities
          title: "Geburtstage"
          show_header_toggle: false
        filter:
          include:
            - entity_id: "sensor.birthday*"
          exclude:
            - state: "off"
      - type: entities
        view_layout:
          grid-area: mid_right
        show_header_toggle: false
        entities:
        - entity: input_boolean.eisschutz_jalousien
          name: Eisschutz Jalousien
      - type: entities
        view_layout:
          grid-area: right_right
        show_header_toggle: false
        entities:
        - entity: input_boolean.gaeste_abends
          name: Gäste
        - entity: input_boolean.arbeit_theke
          name: Arbeit Theke
