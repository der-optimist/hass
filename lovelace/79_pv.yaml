title: PV
path: pv
icon: mdi:solar-power
cards:
  - type: entities
    title: "Test"
    show_header_toggle: false
    entities:
      - input_number.temp_leistung_pv_test
      - sensor.el_leistung_stromzaehler_netzbezug
      - sensor.el_leistung_netzbezug_vorzeichenbehaftet
      - sensor.el_leistung_pv_ac
      - sensor.el_leistung_netz_bilanz
      - sensor.el_leistung_verbrauch_gesamt
      - sensor.el_leistung_anteil_netzbezug
      - sensor.el_leistung_anteil_pv_nicht_einspeisbar
      - sensor.el_leistung_anteil_pv_einspeisbar
      - sensor.strompreis_aktuell_effektiv_euro
      - sensor.strompreis_aktuell_effektiv_cent
  - type: custom:apexcharts-card
    experimental:
      color_threshold: true
    graph_span: 48h
    update_interval: 5min
    apex_config:
      yaxis:
        min: 0
        max: 10000
    now:
      show: True
      label: "jetzt"
    span:
      start: hour
    series:
      - entity: sensor.solcast_forecast_chart
        data_generator: | # This is what builds the data
          return entity.attributes.timestamps.map((ts, index) => {
            return [new Date(ts).getTime(), entity.attributes.forecast_values[index]];
          });
        color_threshold:
          - value: 0
            color: gray
          - value: 250
            color: gray
          - value: 500
            color: darkorange
          - value: 6552
            color: darkorange
          - value: 6852
            color: lime
  - type: custom:apexcharts-card
    graph_span: 5d
    update_interval: 15min
#    chart_type: scatter
#    apex_config:
#      yaxis:
#        min: 0
#        max: 10000
    span:
      start: day
    series:
      - entity: sensor.solcast_forecast_chart
        type: column
        show:
          datalabels: True
        data_generator: | # This is what builds the data
          return entity.attributes.timestamps_daily.map((ts_d, index) => {
            return [new Date(ts_d).getTime(), entity.attributes.forecast_values_daily[index]];
          });
